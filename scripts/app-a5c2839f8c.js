/******/!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}// webpackBootstrap
/******/
var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var i=n(1),o=n(2),a=n(3),r=n(4),c=n(6),s=n(7),p=n(8),l=n(5),u=n(9),d=n(10),h=n(11),m=n(12),v=n(13),$=n(14),f=n(15),g=n(16);angular.module("monarchApp",["ngMaterial","ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","angularMoment","ui.router","toastr","LocalStorageModule","ui.ace"]).constant("moment",moment).constant("keen_project_id","57e6bb3f8db53dfda8a70c6a").constant("keen_read_key","CD887804EA83FC44352DBF6A88DABB0E096C7BDBE3087C684B55CDE7A444856771AD9C60E9A0DC7BE22B6EF9A4C23EAE95D540775DE2C43250AE9F98B5E3B64D43B74A249AFF999F668E5557D257C709725C609A5623E0EA6C3E2055F515A0E7").constant("keen_write_key","AFAF1531EC4B1A99E879B8EB86DD3A53D8724A6FE1FAB0A06E8133EBF66CF957475FB96CB64880EEA8C8E203C4A1273BECF44AE5CDD2189789C6F62509E922D7530AAA74577E6FFA5F26542B49869FF46513DF9B24FD85F57584E8CC50EA36B2").config(i.config).config(o.routerConfig).run(a.runBlock).service("EthereumService",s.EthereumService).service("SecurityService",c.SecurityService).service("MonarchService",l.MonarchService).service("IpfsService",p.IpfsService).controller("DemoController",r.DemoController).controller("ContentViewV0Controller",h.ContentViewV0Controller).directive("ecContentViewV0",m.ecContentViewV0).controller("TextInputV0Controller",v.TextInputV0Controller).directive("ecTextInputV0",$.ecTextInputV0).controller("BooleanInputV0Controller",f.BooleanInputV0Controller).directive("ecBooleanInputV0",g.ecBooleanInputV0).directive("appNavbar",u.appNavbar).directive("monarchApp",d.monarchApp)},function(t,e){function n(t,e,n,i,o,a){t.debugEnabled(!0),i.allowHtml=!0,i.timeOut=3e3,i.positionClass="toast-top-right",i.preventDuplicates=!0,i.progressBar=!0,o.setPrefix("monarch"),n.theme("etherCareTheme").primaryPalette("blue",{"default":"700","hue-1":"800","hue-2":"600","hue-3":"A400"}).accentPalette("green",{"default":"400"}).warnPalette("orange").backgroundPalette("grey",{"default":"200","hue-1":"100","hue-2":"200","hue-3":"800"}),n.theme("dark-grey").primaryPalette("blue").accentPalette("light-blue").warnPalette("orange").backgroundPalette("grey").dark(),n.setDefaultTheme("etherCareTheme")}n.$inject=["$logProvider","$httpProvider","$mdThemingProvider","toastrConfig","localStorageServiceProvider","$mdIconProvider"],e.config=n},function(t,e){function n(t,e){t.state("demo",{url:"/demo",templateUrl:"app/demo/demo.html",controller:"DemoController",controllerAs:"demoCtrl"});window;e.otherwise("/demo")}n.$inject=["$stateProvider","$urlRouterProvider"],e.routerConfig=n},function(t,e){function n(t,e,n,i,o,a,r,c){window;i.App={},i.App.Version="0.0.0",i.App.EthereumService=a,i.App.IpfsService=r,i.App.MonarchService=c,i.$on("$stateChangeStart",function(t,e,n){e.redirectTo&&(t.preventDefault(),o.go(e.redirectTo,n,{location:"replace"}))})}n.$inject=["$location","$timeout","$log","$rootScope","$state","EthereumService","IpfsService","MonarchService"],e.runBlock=n},function(t,e,n){var i=n(5),o=function(){function t(t,e,n,o,a,r,c,s,p,l){var u=this;this.$scope=t,this.$mdSidenav=e,this.$http=n,this.$log=o,this.$rootScope=a,this.$timeout=r,this.$interval=c,this.$sce=s,this.$mdDialog=p,this.toastr=l,this.aceLoaded=function(t){u.ethereum_editor=t,u.$rootScope.$watch(function(){return u.$rootScope.App.EthereumService.accounts},function(t){var e=JSON.stringify(u.$rootScope.App.EthereumService.accounts);u.$log.debug(" heard ed_val ",e),e&&(u.ethereum_editor.setValue(e),u.ethereum_editor.setReadOnly(!0))});var e=t.getSession(),n=t.renderer;e.setUndoManager(new ace.UndoManager),n.setShowGutter(!1)},this.aceChanged=function(t){},this.patient=this.$rootScope.App.MonarchService.patients[0],this.$rootScope.App.MonarchService.scheduleActivities(),KeenAsync.ready(function(){u.$rootScope.App.MonarchService.renderLast100PatientSnapshots(),u.$rootScope.App.MonarchService.renderPageViews(),u.$rootScope.App.MonarchService.loadIpfsImage()}),this.ct=i.ComponentTypes}return t.$inject=["$scope","$mdSidenav","$http","$log","$rootScope","$timeout","$interval","$sce","$mdDialog","toastr"],t}();e.DemoController=o},function(t,e){!function(t){t[t.Incomplete=0]="Incomplete",t[t.Complete=1]="Complete"}(e.ActivityInstanceStatus||(e.ActivityInstanceStatus={}));var n=e.ActivityInstanceStatus;!function(t){t[t.text_input_v0=0]="text_input_v0",t[t.boolean_input_v0=1]="boolean_input_v0",t[t.content_view_v0=2]="content_view_v0"}(e.ComponentTypes||(e.ComponentTypes={}));var i=e.ComponentTypes,o=function(){function t(t,e,o,a,r,c,s,p,l){var u=this;this.$timeout=t,this.$log=e,this.$http=o,this.$window=a,this.$q=r,this.$rootScope=c,this.keen_project_id=s,this.keen_write_key=p,this.keen_read_key=l,this.waitForKeen=function(){u.$rootScope.$watch(function(){return Keen?Keen:void 0},function(t){t&&u.initKeen()})},this.initKeen=function(){KeenAsync.ready(function(){var t=window;u.keen_async_client=t.keen_client})},this.isSpecInInstances=function(t,e){var n=!1;return e.forEach(function(e){t.schema_config.uid===e.activity_spec.schema_config.uid&&(n=!0)}),n},this.getNextInstance=function(t){var e=null;return t.activity_instances.forEach(function(t){e?e.activity_spec.render_config.priority<t.activity_spec.render_config.priority&&(e=t):e=t}),e},this.loadIpfsImage=function(){u.$rootScope.App.IpfsService.ipfs.cat("QmRcm8yiCYmQ1jDxhUVtsjvps4XjtjSTziVSdQsszuiRfw").then(function(t){u.$log.debug("cat: ",t.url);var e=document.getElementById("ipfs_image_tag");e.src=t.url,u.$rootScope.$apply()})["catch"](function(t){u.$log.debug("Fail: ",t)})},this.schedule=function(){u.patients.forEach(function(t){t.activity_suite.activity_specs.forEach(function(e){var i=u.isSpecInInstances(e,t.activity_instances);if(i);else{var o=angular.copy({activity_spec:angular.copy(e),capture:{},status:n.Incomplete});t.activity_instances.push(o),u.$log.debug("activity_instance added...",o)}})})},this.captureAll=function(t,e){u.$log.debug("patient snapshot: ",t),u.$log.debug("instance snapshot: ",e),u.capturePatientSnapshot(t),u.captureInstanceSnapshot(e)},this.capturePatientSnapshot=function(t){u.$log.debug("begin capturePatientSnapshot"),u.$rootScope.App.MonarchService.keen_async_client.recordEvent("patient_snapshot",{patient:angular.copy(t)})},this.captureInstanceSnapshot=function(t){u.$log.debug("begin capturePatientSnapshot"),u.$rootScope.App.MonarchService.keen_async_client.recordEvent("instant_snapshot",{instance:angular.copy(t)})},this.renderLast100PatientSnapshots=function(){var t=new Keen({projectId:u.keen_project_id,readKey:u.keen_read_key}),e=(new Keen.Dataviz).el("#chart_1").colors(["#6ab975"]).height(180).type("metric").prepare();t.query("count",{event_collection:"instant_snapshot",targetProperty:"instance.capture.value",timeframe:"this_14_days",timezone:"UTC"}).then(function(t){e.data(t).render()})["catch"](function(t){e.message(t.message)})},this.renderPageViews=function(){var t=new Keen({projectId:u.keen_project_id,readKey:u.keen_read_key}),e=(new Keen.Dataviz).el("#chart_2").colors(["#6ab975"]).height(180).type("area").prepare();t.query("count",{event_collection:"pageviews",interval:"daily",timeframe:"this_14_days"}).then(function(t){e.data(t).render()})["catch"](function(t){e.message(t.message)})},this.scheduleActivities=function(){u.schedule();var t=later.parse.text("every 60 seconds");later.schedule(t).next(10),later.setInterval(function(){u.schedule()},t)};var d="0/120 * * * *";this.ActivitySuite={activity_specs:[{cron_expression:d,expiration_criteria:"NEVER",render_config:{label:"Enter a word",priority:2,md_theme:"dark-grey",icon:"feedback",component:i.text_input_v0},schema_config:{uid:"0",title:"What word best describes your day?",name:"word",type:"string"}},{cron_expression:d,expiration_criteria:"NEVER",render_config:{label:"Feel well?",priority:1,md_theme:"dark-grey",icon:"healing",component:i.boolean_input_v0},schema_config:{uid:"1",title:"Do you feel well today?",name:"is_feeling_well",type:"boolean"}},{cron_expression:d,expiration_criteria:"NEVER",render_config:{label:"Rate this video",priority:3,md_theme:"dark-grey",icon:"ondemand_video",component:i.content_view_v0},schema_config:{uid:"2",title:"Meditation Excercise",video_url:"http://www.youtube.com/embed/NlOF03DUoWc",name:"has_read_content_view",type:"boolean"}}]},this.patients=[{name:"Janet Perkins",image:"/assets/img/avatar.jpeg",activity_suite:this.ActivitySuite,activity_instances:[]}],this.waitForKeen()}return t.$inject=["$timeout","$log","$http","$window","$q","$rootScope","keen_project_id","keen_write_key","keen_read_key"],t}();e.MonarchService=o},function(t,e){var n=function(){function t(t,e,n,i,o,a,r,c,s){var p=this;this.$timeout=t,this.$log=e,this.$http=n,this.$window=i,this.$q=o,this.$mdToast=a,this.$state=r,this.$rootScope=c,this.localStorageService=s,this.init=function(){p.$log.debug("SecurityService.init()",sjcl)},this.saveAccountSecret=function(t){p.localStorageService.set("AccountSecret",t)},this.getAccountSecret=function(){return p.localStorageService.get("AccountSecret")},this.encryptObject=function(t,e){var n=JSON.stringify(e),i=sjcl.encrypt(t,n),o=JSON.parse(i);return o},this.decryptObject=function(t,e){var n=sjcl.decrypt(t,JSON.stringify(e));return JSON.parse(n)}}return t.$inject=["$timeout","$log","$http","$window","$q","$mdToast","$state","$rootScope","localStorageService"],t}();e.SecurityService=n},function(t,e){var n=function(){function t(t,e,n,i,o,a,r,c){this.$timeout=t,this.$log=e,this.$http=n,this.$window=i,this.$q=o,this.$mdToast=a,this.$state=r,this.$rootScope=c,this.w=window,this.web3=this.w.web3,this.isOnline=void 0!==this.web3,this.isOnline&&(this.accounts=this.w.web3.eth.accounts)}return t.$inject=["$timeout","$log","$http","$window","$q","$mdToast","$state","$rootScope"],t}();e.EthereumService=n},function(t,e){var n=function(){function t(t,e,n,i,o,a,r,c){var s=this;this.$timeout=t,this.$log=e,this.$http=n,this.$window=i,this.$q=o,this.$mdToast=a,this.$state=r,this.$rootScope=c;var p=window,l="127.0.0.1",u="5001";this.ipfs=p.IpfsApi(l,u),this.isOnline=!1,this.ipfs.id().then(function(t){s.$log.debug("my id is: ",t),s.isOnline=!0})["catch"](function(t){console.log("Fail: ",t)})}return t.$inject=["$timeout","$log","$http","$window","$q","$mdToast","$state","$rootScope"],t}();e.IpfsService=n},function(t,e){function n(){return{restrict:"E",scope:{},templateUrl:"app/navbar/navbar.html",controller:i,controllerAs:"vm",bindToController:!0}}e.appNavbar=n;var i=function(){function t(t,e,n,i,o){this.$window=t,this.$scope=e,this.$log=n,this.$rootScope=i,this.$mdSidenav=o}return t.$inject=["$window","$scope","$log","$rootScope","$mdSidenav"],t}();e.NavbarController=i},function(t,e){function n(){return{restrict:"A",controller:i,controllerAs:"etherCareAppCtrl"}}e.monarchApp=n;var i=function(){function t(t,e,n,i,o,a){var r=this;this.$state=t,this.$window=e,this.$scope=n,this.$log=i,this.$rootScope=o,this.$mdSidenav=a,this.bodyClass=t.current.name,o.$watch(function(){return t.current.name},function(t){t&&(i.debug("state: ",t),r.bodyClass=t)})}return t.$inject=["$state","$window","$scope","$log","$rootScope","$mdSidenav"],t}();e.MonarchAppController=i},function(t,e){var n=function(){function t(t,e,n,i,o,a){var r=this;this.$window=t,this.$scope=e,this.$log=n,this.$rootScope=i,this.$mdSidenav=o,this.$sce=a,this.submit=function(t){r.$log.debug("patient snapshot: ",r.patient),r.instance.capture.value=t;var e=r.patient.activity_instances.indexOf(r.instance);r.patient.activity_instances.splice(e,1),r.$rootScope.App.MonarchService.captureAll(r.patient,r.instance)},this.video_url=a.trustAsResourceUrl(this.instance.activity_spec.schema_config.video_url)}return t.$inject=["$window","$scope","$log","$rootScope","$mdSidenav","$sce"],t}();e.ContentViewV0Controller=n},function(t,e,n){function i(){return{restrict:"E",scope:{patient:"=",instance:"="},templateUrl:"app/demo/capture/content_view_v0/content_view_v0.partial.html",controller:o.ContentViewV0Controller,controllerAs:"vm",bindToController:!0}}var o=n(11);e.ecContentViewV0=i},function(t,e){var n=function(){function t(t,e,n,i,o,a){var r=this;this.$window=t,this.$scope=e,this.$log=n,this.$rootScope=i,this.$mdSidenav=o,this.$sce=a,this.submit=function(){var t=r.patient.activity_instances.indexOf(r.instance);r.patient.activity_instances.splice(t,1);r.$rootScope.App.MonarchService.captureAll(r.patient,r.instance)}}return t.$inject=["$window","$scope","$log","$rootScope","$mdSidenav","$sce"],t}();e.TextInputV0Controller=n},function(t,e,n){function i(){return{restrict:"E",scope:{patient:"=",instance:"="},templateUrl:"app/demo/capture/text_input_v0/text_input_v0.partial.html",controller:o.TextInputV0Controller,controllerAs:"vm",bindToController:!0}}var o=n(13);e.ecTextInputV0=i},function(t,e){var n=function(){function t(t,e,n,i,o,a){var r=this;this.$window=t,this.$scope=e,this.$log=n,this.$rootScope=i,this.$mdSidenav=o,this.$sce=a,this.submit=function(t){r.$log.debug("patient snapshot: ",r.patient),r.instance.capture.value=t;var e=r.patient.activity_instances.indexOf(r.instance);r.patient.activity_instances.splice(e,1),r.$rootScope.App.MonarchService.captureAll(r.patient,r.instance)}}return t.$inject=["$window","$scope","$log","$rootScope","$mdSidenav","$sce"],t}();e.BooleanInputV0Controller=n},function(t,e,n){function i(){return{restrict:"E",scope:{patient:"=",instance:"="},templateUrl:"app/demo/capture/boolean_input_v0/boolean_input_v0.partial.html",controller:o.BooleanInputV0Controller,controllerAs:"vm",bindToController:!0}}var o=n(15);e.ecBooleanInputV0=i}]),angular.module("monarchApp").run(["$templateCache",function(t){t.put("app/demo/demo.html",'<app-navbar></app-navbar><md-content class="md-padding" layout-xs="column" layout="row"><div layout="column" flex="70" class="status-cards"><md-card id="ipfs_image_card" md-theme="" md-theme-watch=""><img id="ipfs_image_tag" src="" alt="IPFS DEMO"><md-card-actions layout="row" layout-align="start center"><span ng-show="demoCtrl.$rootScope.App.IpfsService.isOnline">IPFS is running! Here is a squirrel.</span> <span ng-hide="demoCtrl.$rootScope.App.IpfsService.isOnline">IPFS is offline! No squirrel for you.</span></md-card-actions></md-card><md-card id="meta_mask_card" md-theme="" md-theme-watch=""><div layout-fill="" id="ethereum_editor" ui-ace="{ useWrapMode : true, showGutter: false, theme:\'twilight\', mode: \'xml\', firstLineNumber: 5, onLoad: demoCtrl.aceLoaded, onChange: demoCtrl.aceChanged }"></div><md-card-actions layout="row" layout-align="start center"><span ng-show="demoCtrl.$rootScope.App.EthereumService.isOnline">Ethereum is running! Here are your accounts.</span> <span ng-hide="demoCtrl.$rootScope.App.EthereumService.isOnline">Ethereum is offline! No accounts for you.</span></md-card-actions></md-card><md-card id="chart_1" md-theme="" md-theme-watch=""></md-card><md-card id="chart_2" md-theme="" md-theme-watch=""></md-card></div><div layout="column"><div ng-repeat="instance in demoCtrl.patient.activity_instances"><ec-content-view-v0 ng-if="instance.activity_spec.render_config.component === demoCtrl.ct.content_view_v0" patient="demoCtrl.patient" instance="instance"></ec-content-view-v0><ec-text-input-v0 ng-if="instance.activity_spec.render_config.component === demoCtrl.ct.text_input_v0" patient="demoCtrl.patient" instance="instance"></ec-text-input-v0><ec-boolean-input-v0 ng-if="instance.activity_spec.render_config.component === demoCtrl.ct.boolean_input_v0" patient="demoCtrl.patient" instance="instance"></ec-boolean-input-v0></div></div></md-content>'),t.put("app/navbar/navbar.html",'<md-toolbar class="app-navbar" layout="row" layout-align="center center" layout-padding=""><a class="brand-link" ui-sref="demo" flex="">Monarch</a> <a class="md-button" href="https://github.com/transmute-industries/monarch-app">Source</a> <a class="md-button" href="http://monarch.transmute.industries">Live</a></md-toolbar>'),t.put("app/demo/capture/boolean_input_v0/boolean_input_v0.partial.html",'<md-card class="ec-capture-card" md-theme="{{ vm.instance.activity_spec.render_config.md_theme }}" md-theme-watch=""><md-card-actions layout="row" layout-align="end center"><span flex="" layout-padding="">{{vm.instance.activity_spec.schema_config.title}}</span><md-button ng-click="vm.submit(0)" class="">No</md-button><md-button ng-click="vm.submit(1)" class="">Yes</md-button></md-card-actions></md-card>'),t.put("app/demo/capture/text_input_v0/text_input_v0.partial.html",'<md-card class="ec-capture-card" md-theme="{{ vm.instance.activity_spec.render_config.md_theme }}" md-theme-watch=""><md-card-title><md-card-title-text><span class="md-headline">{{vm.instance.activity_spec.schema_config.title}}</span></md-card-title-text></md-card-title><md-card-content><md-input-container layout-fill=""><label>{{vm.instance.activity_spec.render_config.label}}</label> <input ng-model="vm.instance.capture.value" type="text" flex=""></md-input-container></md-card-content><md-card-actions layout="row" layout-align="end center"><md-button ng-click="vm.submit()" class="">Submit</md-button></md-card-actions></md-card>'),t.put("app/demo/capture/content_view_v0/content_view_v0.partial.html",'<md-card class="ec-capture-card" md-theme="{{ vm.instance.activity_spec.render_config.md_theme }}" md-theme-watch=""><iframe style="min-height: 480px" class="youtube-player" type="text/html" layout-fill="" ng-src="{{vm.video_url}}" frameborder="0" allowfullscreen=""></iframe><md-card-actions layout="row" layout-align="end center"><span flex="" layout-padding="">How likely are you to recommend this video?</span><md-button ng-click="vm.submit(rating)" ng-repeat="rating in [1, 2, 3]" class="">{{rating}}</md-button></md-card-actions></md-card>')}]);
//# sourceMappingURL=../maps/scripts/app-a5c2839f8c.js.map
